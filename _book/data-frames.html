<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data frames | A Gentle Introduction to Data Science with R</title>
  <meta name="description" content="3 Data frames | A Gentle Introduction to Data Science with R" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data frames | A Gentle Introduction to Data Science with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="assets/youreka-logo.png" />
  
  <meta name="github-repo" content="tig3r66/youreka-textbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data frames | A Gentle Introduction to Data Science with R" />
  
  
  <meta name="twitter:image" content="assets/youreka-logo.png" />

<meta name="author" content="Youreka Canada" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basics-of-r-and-rstudio.html"/>
<link rel="next" href="more-dplyr.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="assets/youreka-logo.png" ></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to Youreka Canada</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-textbook"><i class="fa fa-check"></i>How to use this textbook</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i>Contributors</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#credit"><i class="fa fa-check"></i>Credit</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="part"><span><b>I Prerequisites</b></span></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install R and RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="install.html"><a href="install.html#r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> R and RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Basics of R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#objects"><i class="fa fa-check"></i><b>2.1</b> Objects</a></li>
<li class="chapter" data-level="2.2" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#functions"><i class="fa fa-check"></i><b>2.2</b> Functions</a></li>
<li class="chapter" data-level="2.3" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#working-directory"><i class="fa fa-check"></i><b>2.3</b> Working directory</a><ul>
<li class="chapter" data-level="2.3.1" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#other-important-things"><i class="fa fa-check"></i><b>2.3.1</b> Other important things</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#basic-math-in-r"><i class="fa fa-check"></i><b>2.4</b> Basic math in R</a></li>
<li class="chapter" data-level="2.5" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#data-structures-in-r"><i class="fa fa-check"></i><b>2.5</b> Data structures in R</a><ul>
<li class="chapter" data-level="2.5.1" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#vectors"><i class="fa fa-check"></i><b>2.5.1</b> Vectors</a></li>
<li class="chapter" data-level="2.5.2" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#missing-values-na"><i class="fa fa-check"></i><b>2.5.2</b> Missing values (NA)</a></li>
<li class="chapter" data-level="2.5.3" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#working-with-multiple-vectors"><i class="fa fa-check"></i><b>2.5.3</b> Working with multiple vectors</a></li>
<li class="chapter" data-level="2.5.4" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#data-frames"><i class="fa fa-check"></i><b>2.5.4</b> Data frames</a></li>
<li class="chapter" data-level="2.5.5" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#reading-in-external-data"><i class="fa fa-check"></i><b>2.5.5</b> Reading in external data</a></li>
<li class="chapter" data-level="2.5.6" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#factors"><i class="fa fa-check"></i><b>2.5.6</b> Factors</a></li>
<li class="chapter" data-level="2.5.7" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#lists"><i class="fa fa-check"></i><b>2.5.7</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#conditionals"><i class="fa fa-check"></i><b>2.6</b> Conditionals</a><ul>
<li class="chapter" data-level="2.6.1" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#conditional-basics"><i class="fa fa-check"></i><b>2.6.1</b> Conditional basics</a></li>
<li class="chapter" data-level="2.6.2" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#if-statements"><i class="fa fa-check"></i><b>2.6.2</b> <code>if</code> statements</a></li>
<li class="chapter" data-level="2.6.3" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#multiple-ifs-vs-else-if"><i class="fa fa-check"></i><b>2.6.3</b> Multiple <code>if</code>s vs <code>else if</code></a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#for-loops"><i class="fa fa-check"></i><b>2.7</b> <code>for</code> loops</a><ul>
<li class="chapter" data-level="2.7.1" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#basic-for-loop"><i class="fa fa-check"></i><b>2.7.1</b> Basic <code>for</code> loop</a></li>
<li class="chapter" data-level="2.7.2" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#looping-with-an-index-storing-results"><i class="fa fa-check"></i><b>2.7.2</b> Looping with an index &amp; storing results</a></li>
<li class="chapter" data-level="2.7.3" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#looping-over-files-optional"><i class="fa fa-check"></i><b>2.7.3</b> Looping over files (OPTIONAL)</a></li>
<li class="chapter" data-level="2.7.4" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#subsetting-data-optional"><i class="fa fa-check"></i><b>2.7.4</b> Subsetting data (OPTIONAL)</a></li>
<li class="chapter" data-level="2.7.5" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#nested-loops-optional"><i class="fa fa-check"></i><b>2.7.5</b> Nested loops (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#functions-1"><i class="fa fa-check"></i><b>2.8</b> Functions</a><ul>
<li class="chapter" data-level="2.8.1" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#function-basics"><i class="fa fa-check"></i><b>2.8.1</b> Function basics</a></li>
<li class="chapter" data-level="2.8.2" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#conditionals-within-functions"><i class="fa fa-check"></i><b>2.8.2</b> Conditionals within functions</a></li>
<li class="chapter" data-level="2.8.3" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#nested-conditionals-optional"><i class="fa fa-check"></i><b>2.8.3</b> Nested conditionals (OPTIONAL)</a></li>
<li class="chapter" data-level="2.8.4" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#default-arguments-and-unnamed-arguments"><i class="fa fa-check"></i><b>2.8.4</b> Default arguments and unnamed arguments</a></li>
<li class="chapter" data-level="2.8.5" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#combining-functions-optional"><i class="fa fa-check"></i><b>2.8.5</b> Combining functions (OPTIONAL)</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Wrangling</b></span></li>
<li class="chapter" data-level="3" data-path="basics-of-r-and-rstudio.html"><a href="basics-of-r-and-rstudio.html#data-frames"><i class="fa fa-check"></i><b>3</b> Data frames</a><ul>
<li class="chapter" data-level="3.1" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3.1</b> Get the gapminder data</a></li>
<li class="chapter" data-level="3.2" data-path="data-frames.html"><a href="data-frames.html#explore-gapminder"><i class="fa fa-check"></i><b>3.2</b> Explore gapminder</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-frames.html"><a href="data-frames.html#importing-and-exporting-data"><i class="fa fa-check"></i><b>3.2.1</b> Importing and exporting data</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-frames.html"><a href="data-frames.html#exploring-variables-in-a-data-frame"><i class="fa fa-check"></i><b>3.2.2</b> Exploring variables in a data Frame</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-frames.html"><a href="data-frames.html#plotting-variables-with-r-optional"><i class="fa fa-check"></i><b>3.2.3</b> Plotting variables with R (OPTIONAL)</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-frames.html"><a href="data-frames.html#data-frame-summary"><i class="fa fa-check"></i><b>3.2.4</b> Data frame summary</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-frames.html"><a href="data-frames.html#data-frames-with-dplyr"><i class="fa fa-check"></i><b>3.3</b> Data frames with dplyr</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-frames.html"><a href="data-frames.html#subsetting-the-data"><i class="fa fa-check"></i><b>3.3.1</b> Subsetting the data</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-frames.html"><a href="data-frames.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>3.3.2</b> Filter rows with <code>filter()</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="data-frames.html"><a href="data-frames.html#pipe-operator"><i class="fa fa-check"></i><b>3.3.3</b> Pipe operator <code>%&gt;%</code></a></li>
<li class="chapter" data-level="3.3.4" data-path="data-frames.html"><a href="data-frames.html#select-columns-with-select"><i class="fa fa-check"></i><b>3.3.4</b> Select Columns with <code>select()</code></a></li>
<li class="chapter" data-level="3.3.5" data-path="data-frames.html"><a href="data-frames.html#pure-predictable-pipeable-optional"><i class="fa fa-check"></i><b>3.3.5</b> Pure, predictable, pipeable (OPTIONAL)</a></li>
<li class="chapter" data-level="3.3.6" data-path="data-frames.html"><a href="data-frames.html#additional-resources"><i class="fa fa-check"></i><b>3.3.6</b> Additional resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="more-dplyr.html"><a href="more-dplyr.html"><i class="fa fa-check"></i><b>4</b> More dplyr</a><ul>
<li class="chapter" data-level="4.1" data-path="more-dplyr.html"><a href="more-dplyr.html#review-and-preparation"><i class="fa fa-check"></i><b>4.1</b> Review and preparation</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-frames.html"><a href="data-frames.html#load-dplyr-and-gapminder"><i class="fa fa-check"></i><b>4.1.1</b> Load <code>dplyr</code> and gapminder</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="more-dplyr.html"><a href="more-dplyr.html#use-mutate-to-add-new-variables"><i class="fa fa-check"></i><b>4.2</b> Use mutate() to add new variables</a></li>
<li class="chapter" data-level="4.3" data-path="more-dplyr.html"><a href="more-dplyr.html#use-arrange-to-row-order-data"><i class="fa fa-check"></i><b>4.3</b> Use arrange() to row-order data</a></li>
<li class="chapter" data-level="4.4" data-path="more-dplyr.html"><a href="more-dplyr.html#use-rename-to-rename-variables"><i class="fa fa-check"></i><b>4.4</b> Use rename() to rename variables</a><ul>
<li class="chapter" data-level="4.4.1" data-path="more-dplyr.html"><a href="more-dplyr.html#select-can-rename-and-reposition-variables"><i class="fa fa-check"></i><b>4.4.1</b> <code>select()</code> Can Rename and Reposition Variables</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="more-dplyr.html"><a href="more-dplyr.html#perform-tasks-on-subsets-with-group_by"><i class="fa fa-check"></i><b>4.5</b> Perform tasks on subsets with <code>group_by()</code></a><ul>
<li class="chapter" data-level="4.5.1" data-path="more-dplyr.html"><a href="more-dplyr.html#counting"><i class="fa fa-check"></i><b>4.5.1</b> Counting</a></li>
<li class="chapter" data-level="4.5.2" data-path="more-dplyr.html"><a href="more-dplyr.html#general-summarization"><i class="fa fa-check"></i><b>4.5.2</b> General summarization</a></li>
<li class="chapter" data-level="4.5.3" data-path="more-dplyr.html"><a href="more-dplyr.html#computing-with-group-wise-summaries"><i class="fa fa-check"></i><b>4.5.3</b> Computing with group-wise summaries</a></li>
<li class="chapter" data-level="4.5.4" data-path="more-dplyr.html"><a href="more-dplyr.html#window-functions-optional"><i class="fa fa-check"></i><b>4.5.4</b> Window functions (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="more-dplyr.html"><a href="more-dplyr.html#introduction-to-visualization-optional"><i class="fa fa-check"></i><b>4.6</b> Introduction to visualization (OPTIONAL)</a></li>
<li class="chapter" data-level="4.7" data-path="more-dplyr.html"><a href="more-dplyr.html#comprehensive-practice-optional"><i class="fa fa-check"></i><b>4.7</b> Comprehensive practice (OPTIONAL)</a></li>
<li class="chapter" data-level="4.8" data-path="more-dplyr.html"><a href="more-dplyr.html#summary"><i class="fa fa-check"></i><b>4.8</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>III Statistics</b></span></li>
<li class="chapter" data-level="5" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html"><i class="fa fa-check"></i><b>5</b> Central limit theorem</a><ul>
<li class="chapter" data-level="5.1" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html#central-limit-theorem-for-means"><i class="fa fa-check"></i><b>5.1</b> Central limit theorem for means</a></li>
<li class="chapter" data-level="5.2" data-path="central-limit-theorem.html"><a href="central-limit-theorem.html#central-limit-theorem-for-probability-optional"><i class="fa fa-check"></i><b>5.2</b> Central limit theorem for probability (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html"><i class="fa fa-check"></i><b>6</b> Basic statistical tests</a><ul>
<li class="chapter" data-level="6.1" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#getting-ready"><i class="fa fa-check"></i><b>6.1</b> Getting ready</a></li>
<li class="chapter" data-level="6.2" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#students-t-test"><i class="fa fa-check"></i><b>6.2</b> Student’s t-test</a></li>
<li class="chapter" data-level="6.3" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi-squared-test"><i class="fa fa-check"></i><b>6.3</b> Chi-squared test</a><ul>
<li class="chapter" data-level="6.3.1" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi2-test-for-goodness-of-fit"><i class="fa fa-check"></i><b>6.3.1</b> <span class="math inline">\(\chi^2\)</span> test for goodness-of-fit</a></li>
<li class="chapter" data-level="6.3.2" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi2-test-for-independence"><i class="fa fa-check"></i><b>6.3.2</b> <span class="math inline">\(\chi^2\)</span> test for independence</a></li>
<li class="chapter" data-level="6.3.3" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#chi2-test-for-homogeneity"><i class="fa fa-check"></i><b>6.3.3</b> <span class="math inline">\(\chi^2\)</span> test for homogeneity</a></li>
<li class="chapter" data-level="6.3.4" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#fishers-exact-test-optional"><i class="fa fa-check"></i><b>6.3.4</b> Fisher’s exact test (OPTIONAL)</a></li>
<li class="chapter" data-level="6.3.5" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#comparison-of-proportions-optional"><i class="fa fa-check"></i><b>6.3.5</b> Comparison of proportions (OPTIONAL)</a></li>
<li class="chapter" data-level="6.3.6" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#contingency-tables"><i class="fa fa-check"></i><b>6.3.6</b> Contingency tables</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="basic-statistical-tests.html"><a href="basic-statistical-tests.html#visualizing-data-distributions-optional"><i class="fa fa-check"></i><b>6.4</b> Visualizing data distributions (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html"><i class="fa fa-check"></i><b>7</b> Comparing multiple means</a><ul>
<li class="chapter" data-level="7.1" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#loading-packages"><i class="fa fa-check"></i><b>7.1</b> Loading packages</a></li>
<li class="chapter" data-level="7.2" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#merging-datasets"><i class="fa fa-check"></i><b>7.2</b> Merging datasets</a></li>
<li class="chapter" data-level="7.3" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#one-way-anova"><i class="fa fa-check"></i><b>7.3</b> One-way ANOVA</a><ul>
<li class="chapter" data-level="7.3.1" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#the-iris-dataset"><i class="fa fa-check"></i><b>7.3.1</b> The iris dataset</a></li>
<li class="chapter" data-level="7.3.2" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#non-parametric-alternatives-to-anova"><i class="fa fa-check"></i><b>7.3.2</b> Non-parametric alternatives to ANOVA</a></li>
<li class="chapter" data-level="7.3.3" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#two-way-anova"><i class="fa fa-check"></i><b>7.3.3</b> Two-way ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#linear-regression"><i class="fa fa-check"></i><b>7.4</b> Linear regression</a><ul>
<li class="chapter" data-level="7.4.1" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#basic-concepts"><i class="fa fa-check"></i><b>7.4.1</b> Basic concepts</a></li>
<li class="chapter" data-level="7.4.2" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#pearson-correlation"><i class="fa fa-check"></i><b>7.4.2</b> Pearson correlation</a></li>
<li class="chapter" data-level="7.4.3" data-path="comparing-multiple-means.html"><a href="comparing-multiple-means.html#spearman-correlation"><i class="fa fa-check"></i><b>7.4.3</b> Spearman correlation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>8</b> Data visualization</a><ul>
<li class="chapter" data-level="8.1" data-path="data-visualization.html"><a href="data-visualization.html#a-graphing-template"><i class="fa fa-check"></i><b>8.1</b> A graphing template</a></li>
<li class="chapter" data-level="8.2" data-path="data-visualization.html"><a href="data-visualization.html#scatter-plot"><i class="fa fa-check"></i><b>8.2</b> Scatter plot</a><ul>
<li class="chapter" data-level="8.2.1" data-path="data-visualization.html"><a href="data-visualization.html#trend-lines"><i class="fa fa-check"></i><b>8.2.1</b> Trend lines</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-visualization.html"><a href="data-visualization.html#facets"><i class="fa fa-check"></i><b>8.2.2</b> Facets</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-visualization.html"><a href="data-visualization.html#aesthetic-mappings"><i class="fa fa-check"></i><b>8.3</b> Aesthetic mappings</a></li>
<li class="chapter" data-level="8.4" data-path="data-visualization.html"><a href="data-visualization.html#line-plot"><i class="fa fa-check"></i><b>8.4</b> Line plot</a></li>
<li class="chapter" data-level="8.5" data-path="data-visualization.html"><a href="data-visualization.html#bar-plot"><i class="fa fa-check"></i><b>8.5</b> Bar plot</a><ul>
<li class="chapter" data-level="8.5.1" data-path="data-visualization.html"><a href="data-visualization.html#basics"><i class="fa fa-check"></i><b>8.5.1</b> Basics</a></li>
<li class="chapter" data-level="8.5.2" data-path="data-visualization.html"><a href="data-visualization.html#plotting-significance-optional"><i class="fa fa-check"></i><b>8.5.2</b> Plotting significance (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="data-visualization.html"><a href="data-visualization.html#box-plot"><i class="fa fa-check"></i><b>8.6</b> Box plot</a></li>
<li class="chapter" data-level="8.7" data-path="data-visualization.html"><a href="data-visualization.html#histogram-and-density-plot"><i class="fa fa-check"></i><b>8.7</b> Histogram and density plot</a></li>
<li class="chapter" data-level="8.8" data-path="data-visualization.html"><a href="data-visualization.html#assembly-of-multiple-figures-optional"><i class="fa fa-check"></i><b>8.8</b> Assembly of multiple figures (OPTIONAL)</a></li>
<li class="chapter" data-level="8.9" data-path="data-visualization.html"><a href="data-visualization.html#extras-optional"><i class="fa fa-check"></i><b>8.9</b> Extras (OPTIONAL)</a><ul>
<li class="chapter" data-level="8.9.1" data-path="data-visualization.html"><a href="data-visualization.html#choropleth"><i class="fa fa-check"></i><b>8.9.1</b> Choropleth</a></li>
<li class="chapter" data-level="8.9.2" data-path="data-visualization.html"><a href="data-visualization.html#animations"><i class="fa fa-check"></i><b>8.9.2</b> Animations</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="data-frames.html"><a href="data-frames.html#additional-resources"><i class="fa fa-check"></i><b>8.10</b> Additional resources</a></li>
</ul></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./index.html#license">
    License: CC-BY-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Gentle Introduction to Data Science with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-frames" class="section level1">
<h1><span class="header-section-number">3</span> Data frames</h1>
<p>Whenever you have rectangular, “spreadsheetey” data, your default data structure in R should be a data frame. Do not depart from this without good reason. Data frames are awesome because…</p>
<ul>
<li>They neatly package related variables and maintain a “row-ordering” like that in a spreadsheet. This makes it easy to apply filters to rows and columns of interest.</li>
<li>Most functions for inference, modelling, and graphing are happy to be passed a data frame via a <code>data =</code> argument.</li>
<li>The set of packages known as the <a href="https://www.tidyverse.org/"><code>tidyverse</code></a> takes this one step further and explicitly prioritizes the processing of data frames. This includes popular packages like <code>dplyr</code> and <code>ggplot2</code>. In fact the tidyverse prioritizes a special flavor of data frame, called a “tibble.”</li>
</ul>
<p>Data frames – unlike general arrays or matrices in R – can hold variables of different flavours. For example, data frames can simultaneously hold <em>character data</em> (subject ID or name), <em>quantitative data</em> (white blood cell count), and <em>categorical information</em> (treated vs. untreated).</p>
<p>If you use data structures that can only hold 1 type of data (e.g., matrices) for data analysis, you are likely to make the terrible mistake of spreading a dataset out over multiple, unlinked objects. Why? Because you can’t put character data, such as subject name, into the numeric matrix that holds white blood cell count. This fragmentation is a bad idea.</p>
<div id="get-the-gapminder-data" class="section level2">
<h2><span class="header-section-number">3.1</span> Get the gapminder data</h2>
<p>We will work with some of the data from the <a href="https://www.gapminder.org/">Gapminder project</a>. The Gapminder project contains the gapminder dataset, which summarises the progression of countries over time, looking at statistics like life expectancy and GDP. Let’s first install the package:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;gapminder&quot;</span>)</a></code></pre></div>
<p>Now load the package:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a></code></pre></div>
</div>
<div id="explore-gapminder" class="section level2">
<h2><span class="header-section-number">3.2</span> Explore gapminder</h2>
<p>By loading the <code>gapminder</code> package, we now have access to a data frame by the same name. Get an overview of this with <code>str()</code>, which displays the structure of an object. An object is essentially a storage unit for data.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1"><span class="kw">str</span>(gapminder)</a></code></pre></div>
<pre><code>## tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)
##  $ country  : Factor w/ 142 levels &quot;Afghanistan&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ continent: Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
##  $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
##  $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
##  $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</code></pre>
<p><code>str()</code> will provide a sensible description of almost anything and, worst case, nothing bad can actually happen. When in doubt, just use <code>str()</code> on some of the recently created objects to get some ideas about what to do next.</p>
<p>We could print the <code>gapminder</code> object itself to screen. However, if you’ve used R before, you might be reluctant to do this, because large datasets fill your Console and provide very little insight.</p>
<p>If you have not already done so, install the <code>tidyverse</code> meta-package now:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</a></code></pre></div>
<p>Now load it:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>Now we can print <code>gapminder</code> to screen! It is a tibble (and also a regular data frame) and the <code>tidyverse</code> provides a nice print method that shows the most important stuff and doesn’t fill up your Console. The <a href="https://github.com/hadley/tidyverse">tidyverse</a> offers a special case of R’s default data frame: the <code>tibble</code>.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1"><span class="co"># this is a comment</span></a>
<a class="sourceLine" id="cb260-2" data-line-number="2"><span class="co"># anything that follows the pound sign (#) is not run</span></a>
<a class="sourceLine" id="cb260-3" data-line-number="3"><span class="kw">class</span>(gapminder)  <span class="co"># the tibble is also a data frame</span></a></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1">gapminder</a></code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # … with 1,694 more rows</code></pre>
<p>Wow, that’s a lot of output! The first line refers to what we’re printing – a tibble with 1704 rows and 6 columns. Below each column heading, you can see <code>&lt;fct&gt;   &lt;fct&gt;   &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;dbl&gt;</code>. These refer to the <strong>variable type</strong>. That is, <code>fct</code> is a factor (kinda like a categorical variable), <code>int</code> stands for integer, and <code>dbl</code> stands for double (a number with decimal places).</p>
<p>If you are just dealing with data frames, you can rein in data frame printing explicitly with <code>head()</code> and <code>tail()</code>. <code>head()</code> displays the first 6 rows of your data frame by default whereas <code>tail()</code> shows the last 6 rows.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1"><span class="kw">head</span>(gapminder)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1 Afghanistan Asia       1952    28.8  8425333      779.
## 2 Afghanistan Asia       1957    30.3  9240934      821.
## 3 Afghanistan Asia       1962    32.0 10267083      853.
## 4 Afghanistan Asia       1967    34.0 11537966      836.
## 5 Afghanistan Asia       1972    36.1 13079460      740.
## 6 Afghanistan Asia       1977    38.4 14880372      786.</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1"><span class="kw">tail</span>(gapminder)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   country  continent  year lifeExp      pop gdpPercap
##   &lt;fct&gt;    &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1 Zimbabwe Africa     1982    60.4  7636524      789.
## 2 Zimbabwe Africa     1987    62.4  9216418      706.
## 3 Zimbabwe Africa     1992    60.4 10704340      693.
## 4 Zimbabwe Africa     1997    46.8 11404948      792.
## 5 Zimbabwe Africa     2002    40.0 11926563      672.
## 6 Zimbabwe Africa     2007    43.5 12311143      470.</code></pre>
<p>You can also specify the number of rows displayed by passing in a number.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" data-line-number="1"><span class="kw">head</span>(gapminder, <span class="dv">10</span>)</a></code></pre></div>
<pre><code>## # A tibble: 10 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.</code></pre>
<p>Just for your reference, if you want to change a data frame into a tibble for nicer printing, use <code>as_tibble()</code>!</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1"><span class="kw">as_tibble</span>(my_data_frame)  <span class="co"># my_data_frame is the thing we want to make a tibble</span></a></code></pre></div>
<p>Here are more ways to query basic info on a data frame:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" data-line-number="1"><span class="kw">names</span>(gapminder)  <span class="co"># returns column names</span></a></code></pre></div>
<pre><code>## [1] &quot;country&quot;   &quot;continent&quot; &quot;year&quot;      &quot;lifeExp&quot;   &quot;pop&quot;       &quot;gdpPercap&quot;</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" data-line-number="1"><span class="kw">ncol</span>(gapminder)   <span class="co"># returns number of columns</span></a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" data-line-number="1"><span class="kw">nrow</span>(gapminder)   <span class="co"># returns number of rows</span></a></code></pre></div>
<pre><code>## [1] 1704</code></pre>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" data-line-number="1"><span class="kw">dim</span>(gapminder)    <span class="co"># returns # of rows x # of columns </span></a></code></pre></div>
<pre><code>## [1] 1704    6</code></pre>
<p>A statistical summary of the data can be obtained with <code>summary()</code>. That is, each column’s statistics are shown separately.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" data-line-number="1"><span class="kw">summary</span>(gapminder)</a></code></pre></div>
<pre><code>##         country        continent        year         lifeExp     
##  Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.60  
##  Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.20  
##  Algeria    :  12   Asia    :396   Median :1980   Median :60.71  
##  Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.47  
##  Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.85  
##  Australia  :  12                  Max.   :2007   Max.   :82.60  
##  (Other)    :1632                                                
##       pop              gdpPercap       
##  Min.   :6.001e+04   Min.   :   241.2  
##  1st Qu.:2.794e+06   1st Qu.:  1202.1  
##  Median :7.024e+06   Median :  3531.8  
##  Mean   :2.960e+07   Mean   :  7215.3  
##  3rd Qu.:1.959e+07   3rd Qu.:  9325.5  
##  Max.   :1.319e+09   Max.   :113523.1  
## </code></pre>
<div id="importing-and-exporting-data" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Importing and exporting data</h3>
<p>We can export the data frame to a comma-separated values (.csv) file.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" data-line-number="1"><span class="kw">write.csv</span>(gapminder, <span class="dt">file =</span> <span class="st">&quot;data/03_data-frames/gapminder.csv&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>)</a></code></pre></div>
<pre><code>## Warning in write.csv(gapminder, file = &quot;data/03_data-frames/gapminder.csv&quot;, :
## attempt to set &#39;sep&#39; ignored</code></pre>
<p><code>.csv</code> stands for comma-separated values. This is the preferred way of importing and exporting data as it contains no formatting. This means the data can be easily parsed using various programming languages. You can also import a .csv file to Excel.</p>
<p>On top of writing to a .csv file, we can also read .csv files into R. It is super easy to do:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" data-line-number="1">gapminder2 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/03_data-frames/gapminder.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb283-2" data-line-number="2"><span class="kw">as_tibble</span>(gapminder2)  <span class="co"># converting the data frame to a tibble</span></a></code></pre></div>
<p>As you can see,<code>read.csv()</code> returns a data frame by default.</p>
<p>Let’s go back to the result of <code>str()</code> to talk about data frames.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb284-1" data-line-number="1"><span class="kw">str</span>(gapminder)</a></code></pre></div>
<pre><code>## tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)
##  $ country  : Factor w/ 142 levels &quot;Afghanistan&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ continent: Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
##  $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
##  $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
##  $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
##  $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</code></pre>
<p>A data frame is a special case of a <code>list</code>, which is used in R to hold just about anything. Data frames are a special case where the length of each list component is the same. Data frames are (usually) superior to matrices in R because they can hold vectors of different flavors, e.g. numeric, character, and categorical data can be stored together.</p>
</div>
<div id="exploring-variables-in-a-data-frame" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Exploring variables in a data Frame</h3>
<p><strong>Note:</strong> don’t worry too much about the code to make the figures right now – we will learn the specifics of data visualization in future lectures. In particular, we will introduce how to use <code>ggplot2</code>, a powerful package for data visualization that relies heavily on data frames. For now, focus on how the visualizations help to tell a story.</p>
<p>To specify a single variable from a data frame, use the dollar sign <code>$</code>. Let’s explore the numeric variable for life expectancy.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb286-1" data-line-number="1"><span class="kw">head</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>## [1] 28.801 30.332 31.997 34.020 36.088 38.438</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb288-1" data-line-number="1"><span class="kw">summary</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   23.60   48.20   60.71   59.47   70.85   82.60</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb290-1" data-line-number="1"><span class="kw">hist</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<p><img src="_main_files/figure-html/histogram-lifeExp-1.png" width="672" /></p>
<p>You can also add custom labels to your graph:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb291-1" data-line-number="1"><span class="kw">hist</span>(gapminder<span class="op">$</span>lifeExp,</a>
<a class="sourceLine" id="cb291-2" data-line-number="2">     <span class="dt">main=</span><span class="st">&quot;Histogram of Life Expectancy&quot;</span>,</a>
<a class="sourceLine" id="cb291-3" data-line-number="3">     <span class="dt">xlab=</span><span class="st">&quot;Life expectancy (years)&quot;</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-102-1.png" width="672" /></p>
<p>The <code>year</code> variable is an integer variable, but since there are so few unique values it also functions a bit like a categorical variable.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb292-1" data-line-number="1"><span class="kw">summary</span>(gapminder<span class="op">$</span>year)</a></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1952    1966    1980    1980    1993    2007</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb294-1" data-line-number="1"><span class="kw">table</span>(gapminder<span class="op">$</span>year)</a></code></pre></div>
<pre><code>## 
## 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 2002 2007 
##  142  142  142  142  142  142  142  142  142  142  142  142</code></pre>
<p>The variables for country and continent hold truly categorical information, which are stored as a <code>factor</code> in R.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb296-1" data-line-number="1"><span class="kw">class</span>(gapminder<span class="op">$</span>continent)</a></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb298-1" data-line-number="1"><span class="kw">summary</span>(gapminder<span class="op">$</span>continent)</a></code></pre></div>
<pre><code>##   Africa Americas     Asia   Europe  Oceania 
##      624      300      396      360       24</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb300-1" data-line-number="1"><span class="kw">levels</span>(gapminder<span class="op">$</span>continent)</a></code></pre></div>
<pre><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Asia&quot;     &quot;Europe&quot;   &quot;Oceania&quot;</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb302-1" data-line-number="1"><span class="kw">nlevels</span>(gapminder<span class="op">$</span>continent)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>The <strong>levels</strong> of the factor <code>continent</code> are “Africa”, “Americas”, etc. and this is what’s usually presented to your eyeballs by R. In general, the levels are friendly human-readable character strings, like “male/female” and “control/treated”. But <em>never ever ever</em> forget that, under the hood, R is really storing integer codes 1, 2, 3, etc. Look at the result from <code>str(gapminder$continent)</code> if you are skeptical.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb304-1" data-line-number="1"><span class="kw">str</span>(gapminder<span class="op">$</span>continent)</a></code></pre></div>
<pre><code>##  Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...</code></pre>
<p>Specifically in modelling and figure-making, factors are anticipated and accommodated by the functions and packages you will want to exploit. Note that factors are NOT integers. Factors are a numerical way that R uses to represent <strong>categorical variables</strong>.</p>
</div>
<div id="plotting-variables-with-r-optional" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Plotting variables with R (OPTIONAL)</h3>
<p>In this next bit, we count how many observations are associated with each continent and, as usual, try to portray that info visually. This makes it much easier to quickly see that African countries are well represented in this dataset.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb306-1" data-line-number="1"><span class="kw">table</span>(gapminder<span class="op">$</span>continent)</a></code></pre></div>
<pre><code>## 
##   Africa Americas     Asia   Europe  Oceania 
##      624      300      396      360       24</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb308-1" data-line-number="1"><span class="kw">barplot</span>(<span class="kw">table</span>(gapminder<span class="op">$</span>continent))</a></code></pre></div>
<p><img src="_main_files/figure-html/tabulate-continent-1.png" width="672" /></p>
<p>Although we haven’t begun our formal coverage of data visualization, it’s so important for exploring a dataset that we will make a few figures anyway. Here we use only base R graphics, which are very basic.</p>
<p>When you are first presented with a data set and you have no idea what the relationships are between variables, a dot plot is usually a good starting point.</p>
<p><strong>Note:</strong> the squiggly line is called a tilde (~). In terms of the <code>plot()</code> function, the first variable is the dependent variable <em>y</em> and the second is/are the independent variable(s) <em>x</em>. That is, <code>plot(y ~ x, dataframe_name)</code>.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1"><span class="kw">plot</span>(lifeExp <span class="op">~</span><span class="st"> </span>year, gapminder)</a></code></pre></div>
<p><img src="_main_files/figure-html/first-plots-base-R-1.png" width="672" /></p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb310-1" data-line-number="1"><span class="kw">plot</span>(lifeExp <span class="op">~</span><span class="st"> </span>gdpPercap, gapminder)</a></code></pre></div>
<p><img src="_main_files/figure-html/first-plots-base-R-2.png" width="672" /></p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" data-line-number="1"><span class="kw">plot</span>(lifeExp <span class="op">~</span><span class="st"> </span><span class="kw">log</span>(gdpPercap), gapminder)</a></code></pre></div>
<p><img src="_main_files/figure-html/first-plots-base-R-3.png" width="672" /></p>
<p>Important note: <code>log()</code> in R has base e. To use base 10, use the <code>log10()</code> function. Don’t worry too much about logarithms yet :)</p>
</div>
<div id="data-frame-summary" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Data frame summary</h3>
<p>Use data frames and the <a href="https://www.tidyverse.org/"><code>tidyverse</code></a>!!! The <code>tidyverse</code> provides a special type of data frame called a “tibble” that has nice default printing behavior, among other benefits.</p>
<ul>
<li>When in doubt, <code>str()</code> something or print something.</li>
<li>Always understand the basic extent of your data frames: number of rows and columns.</li>
<li>Understand what flavor the variables are.</li>
<li>Use factors!!! But with intention and care.</li>
<li>Do basic statistical and visual sanity checking of each variable.</li>
<li>Refer to variables by name (ex: <code>gapminder$lifeExp</code>) not by column number. Your code will be more robust and readable.</li>
</ul>
</div>
</div>
<div id="data-frames-with-dplyr" class="section level2">
<h2><span class="header-section-number">3.3</span> Data frames with dplyr</h2>
<p><code>dplyr</code> is a package for data manipulation developed by Hadley Wickham and Romain Francois. It is built to be fast, highly expressive, and open-minded about how your data is stored. It is installed as part of the the <a href="https://github.com/hadley/tidyverse"><code>tidyverse</code></a> meta-package and it is among the packages loaded via <code>library(tidyverse)</code>.</p>
<p>Here’s a fun bit of trivia: <code>dplyr</code> stands for “<strong>d</strong>ata frame <strong>p</strong>liers”.</p>
<div id="load-dplyr-and-gapminder" class="section level4">
<h4><span class="header-section-number">3.3.0.1</span> Load <code>dplyr</code> and <code>gapminder</code></h4>
<p>I choose to load the <code>tidyverse</code>, which loads <code>dplyr</code> among other packages we use incidentally below. Also load <code>gapminder</code>. If you don’t have these packages, use the <code>install.packages('pkg_name')</code> command. Don’t worry too much if you have warning messages.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb312-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb312-2" data-line-number="2"><span class="kw">library</span>(gapminder)</a></code></pre></div>
<p>The <code>gapminder</code> data frame is a special kind of data frame: a tibble. You can treat tibbles just like a data frame.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb313-1" data-line-number="1">gapminder</a></code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # … with 1,694 more rows</code></pre>
<p>It’s tibble-ness is why we get nice compact printing. For a reminder of the problems with base data frame printing, go type <code>iris</code> in the R Console (<code>iris</code> is a well-known data frame built into R).</p>
<p>The <code>class()</code> function tells you what type of data structure you’re dealing with. Note how gapminder’s <code>class()</code> includes <code>tbl_df</code>, <code>tbl</code>, and <code>data.frame</code>. This shows that tibbles are built on top of the data frame.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb315-1" data-line-number="1"><span class="kw">class</span>(gapminder)</a></code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>There will be some functions, like <code>print()</code>, that know about tibbles and do something special. There will others that do not, like <code>summary()</code>. In which case the regular data frame treatment will happen, because every tibble is also a regular data frame. As a reminder, <code>print()</code> prints stuff to the console and <code>summary()</code> provides a statistical overview of your dataset.</p>
<p>To turn any data frame into a tibble use <code>as_tibble()</code>:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb317-1" data-line-number="1"><span class="kw">as_tibble</span>(iris)</a></code></pre></div>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
##  1          5.1         3.5          1.4         0.2 setosa 
##  2          4.9         3            1.4         0.2 setosa 
##  3          4.7         3.2          1.3         0.2 setosa 
##  4          4.6         3.1          1.5         0.2 setosa 
##  5          5           3.6          1.4         0.2 setosa 
##  6          5.4         3.9          1.7         0.4 setosa 
##  7          4.6         3.4          1.4         0.3 setosa 
##  8          5           3.4          1.5         0.2 setosa 
##  9          4.4         2.9          1.4         0.2 setosa 
## 10          4.9         3.1          1.5         0.1 setosa 
## # … with 140 more rows</code></pre>
</div>
<div id="subsetting-the-data" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Subsetting the data</h3>
<p>If you feel the urge to store a little snippet of your data:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb319-1" data-line-number="1">canada &lt;-<span class="st"> </span>gapminder[<span class="dv">241</span><span class="op">:</span><span class="dv">252</span>, ]</a></code></pre></div>
<p>Stop and ask yourself …</p>
<blockquote>
<p>Do I want to create a separate subset of my original data?</p>
</blockquote>
<p>If YES, <strong>use proper data aggregation techniques or don’t subset the data.</strong> Alternatively, only subset the data as a temporary measure while you develop your elegant code for computing on or visualizing these subsets.</p>
<p>If NO, then don’t subset!</p>
<p>Copies and excerpts of your data clutter your workspace, invite mistakes, and sow general confusion. Avoid whenever possible. Reality can also lie somewhere in between. You will find the workflows presented below can help you accomplish your goals with minimal creation of temporary, intermediate objects.</p>
<p>If you create a variable you don’t want, you can always remove it using the <code>rm()</code> function.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb320-1" data-line-number="1">x &lt;-<span class="st"> &#39;thing to not keep&#39;</span></a>
<a class="sourceLine" id="cb320-2" data-line-number="2"><span class="kw">print</span>(x)</a>
<a class="sourceLine" id="cb320-3" data-line-number="3"><span class="kw">rm</span>(x)</a>
<a class="sourceLine" id="cb320-4" data-line-number="4"><span class="co"># print(x)  # gives an error because x is deleted</span></a></code></pre></div>
</div>
<div id="filter-rows-with-filter" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Filter rows with <code>filter()</code></h3>
<p><code>filter()</code> takes logical expressions and returns the rows for which all are <code>TRUE</code>. Use this when you want to subset observations based on values.</p>
<p>The first argument is the name of the data frame. The subsequent arguments are the expressions that filter the dataframe. For example, let’s filter all rows from <code>gapminder</code> where life expectancy is less than 29 years.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb321-1" data-line-number="1"><span class="kw">filter</span>(gapminder, lifeExp <span class="op">&lt;</span><span class="st"> </span><span class="dv">29</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   country     continent  year lifeExp     pop gdpPercap
##   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;   &lt;int&gt;     &lt;dbl&gt;
## 1 Afghanistan Asia       1952    28.8 8425333      779.
## 2 Rwanda      Africa     1992    23.6 7290203      737.</code></pre>
<p>When you run this line of code, <code>dplyr</code> filters the data and returns a new data frame. <code>dplyr</code> functions never modify their inputs, so if you want to save the result, you need to use the assignment operator, <code>&lt;-</code>. Let’s try this out! Here we filter based on <code>country</code> and <code>year</code>:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb323-1" data-line-number="1">rwanda_gthan_<span class="dv">1979</span> &lt;-<span class="st"> </span><span class="kw">filter</span>(gapminder, country <span class="op">==</span><span class="st"> &quot;Rwanda&quot;</span>, year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1979</span>)</a></code></pre></div>
<p>Compare with some base R code to accomplish the same things:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" data-line-number="1">gapminder[gapminder<span class="op">$</span>lifeExp <span class="op">&lt;</span><span class="st"> </span><span class="dv">29</span>, ]     <span class="co"># indexing is distracting</span></a>
<a class="sourceLine" id="cb324-2" data-line-number="2"><span class="kw">subset</span>(gapminder, country <span class="op">==</span><span class="st"> &quot;Rwanda&quot;</span>)  <span class="co"># almost same as filter; quite nice actually</span></a></code></pre></div>
<p>What if you want to filter rows based on multiple values in a variable? For example, what if we want to filter all rows with either Rwanda or Afghanistan as countries?</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb325-1" data-line-number="1"><span class="kw">filter</span>(gapminder, country <span class="op">==</span><span class="st"> &quot;Rwanda&quot;</span> <span class="op">|</span><span class="st"> </span>country <span class="op">==</span><span class="st"> &quot;Afghanistan&quot;</span>)</a></code></pre></div>
<p>Here we use a Boolean operator, <code>|</code>, which means “or”. Boolean operators always return either <code>TRUE</code> or <code>FALSE</code>. Some other common ones are <code>&amp;</code> (and) and <code>!</code> (not).</p>
<p>What if we want to keep more than just 2 countries? One way would be to string Boolean operators together like so: <code>country == &quot;Canada&quot; | country == &quot;Rwanda&quot; | country == &quot;Afghanistan | ...</code> This, however, is very wordy. A useful shortcut is to use <code>x %in% y</code>. This selects every row where <code>x</code> is one of the values in <code>y</code>:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb326-1" data-line-number="1"><span class="kw">filter</span>(gapminder, country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Rwanda&quot;</span>, <span class="st">&quot;Afghanistan&quot;</span>))</a>
<a class="sourceLine" id="cb326-2" data-line-number="2"><span class="kw">filter</span>(gapminder, country <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;Rwanda&quot;</span>, <span class="st">&quot;Afghanistan&quot;</span>))</a></code></pre></div>
<p>Under no circumstances should you subset your data the way I did at first:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb327-1" data-line-number="1">excerpt &lt;-<span class="st"> </span>gapminder[<span class="dv">241</span><span class="op">:</span><span class="dv">252</span>, ]</a></code></pre></div>
<p>Why is this a terrible idea?</p>
<ul>
<li>It is not self-documenting. What is so special about rows 241 through 252?</li>
<li>It is fragile. This line of code will produce different results if someone changes the row order of <code>gapminder</code>, e.g. sorts the data earlier in the script.</li>
</ul>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb328-1" data-line-number="1"><span class="kw">filter</span>(gapminder, country <span class="op">==</span><span class="st"> &quot;Canada&quot;</span>)</a></code></pre></div>
<p>This call explains itself and is fairly robust.</p>
</div>
<div id="pipe-operator" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Pipe operator <code>%&gt;%</code></h3>
<p>Before we go any further, we should exploit the new pipe operator that the tidyverse imports from the <a href="https://github.com/smbache/magrittr"><code>magrittr</code></a> package by Stefan Bache. Here’s what it looks like: <code>%&gt;%</code>. The RStudio keyboard shortcut: Ctrl + Shift + M (Windows), Cmd + Shift + M (Mac).</p>
<p>Let’s demo then I’ll explain:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb329-1" data-line-number="1">gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</a></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1 Afghanistan Asia       1952    28.8  8425333      779.
## 2 Afghanistan Asia       1957    30.3  9240934      821.
## 3 Afghanistan Asia       1962    32.0 10267083      853.
## 4 Afghanistan Asia       1967    34.0 11537966      836.
## 5 Afghanistan Asia       1972    36.1 13079460      740.
## 6 Afghanistan Asia       1977    38.4 14880372      786.</code></pre>
<p>The above code is equivalent to <code>head(gapminder)</code>. The pipe operator takes the thing on the left-hand-side and <strong>pipes</strong> it into the function call on the right-hand-side. It literally drops it in as the first argument. You can think of an argument as your input to a function. If you remember your grade school math, functions in R do exactly what you’ve learned in school – it takes inputs (arguments/parameters) and spits an output, or a return value.</p>
<p>Never fear, you can still specify other arguments to this function! To see the first 3 rows of Gapminder, we could say <code>head(gapminder, 3)</code> or this:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb331-1" data-line-number="1">gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##   country     continent  year lifeExp      pop gdpPercap
##   &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1 Afghanistan Asia       1952    28.8  8425333      779.
## 2 Afghanistan Asia       1957    30.3  9240934      821.
## 3 Afghanistan Asia       1962    32.0 10267083      853.</code></pre>
<p>You are probably not impressed yet, but the magic will happen soon.</p>
</div>
<div id="select-columns-with-select" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Select Columns with <code>select()</code></h3>
<p>Use <code>select()</code> to subset the data on variables or columns. Here’s a conventional call:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb333-1" data-line-number="1"><span class="kw">select</span>(gapminder, year, lifeExp)</a></code></pre></div>
<pre><code>## # A tibble: 1,704 x 2
##     year lifeExp
##    &lt;int&gt;   &lt;dbl&gt;
##  1  1952    28.8
##  2  1957    30.3
##  3  1962    32.0
##  4  1967    34.0
##  5  1972    36.1
##  6  1977    38.4
##  7  1982    39.9
##  8  1987    40.8
##  9  1992    41.7
## 10  1997    41.8
## # … with 1,694 more rows</code></pre>
<p>And here’s the same operation, but written with the pipe operator and piped through <code>head()</code>:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb335-1" data-line-number="1">gapminder <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb335-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(year, lifeExp) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb335-3" data-line-number="3"><span class="st">  </span><span class="kw">head</span>(<span class="dv">4</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##    year lifeExp
##   &lt;int&gt;   &lt;dbl&gt;
## 1  1952    28.8
## 2  1957    30.3
## 3  1962    32.0
## 4  1967    34.0</code></pre>
<p>Think: “Take <code>gapminder</code>, then select the variables year and lifeExp, then show the first 4 rows.”</p>
<p>If we didn’t have the pipe operator, this is what the above function would look like:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb337-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">select</span>(gapminder, year, lifeExp), <span class="dv">4</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##    year lifeExp
##   &lt;int&gt;   &lt;dbl&gt;
## 1  1952    28.8
## 2  1957    30.3
## 3  1962    32.0
## 4  1967    34.0</code></pre>
<p>As you can see, this is way harder to read. That’s why the pipe operator is so useful.</p>
<p>An important note is that select does not actually filter any rows. It simply selects columns.</p>
<p><code>select()</code> used alongisde <code>everything()</code> is also quite handy if you want to move variables within your data frame. The <code>everything()</code> function selects all variables not explicitly mentioned in <code>select()</code>. For example, let’s move <code>year</code> and <code>continent</code> to the front of the <code>gapminder</code> tibble:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb339-1" data-line-number="1"><span class="kw">select</span>(gapminder, year, continent, <span class="kw">everything</span>())</a></code></pre></div>
<pre><code>## # A tibble: 1,704 x 6
##     year continent country     lifeExp      pop gdpPercap
##    &lt;int&gt; &lt;fct&gt;     &lt;fct&gt;         &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1  1952 Asia      Afghanistan    28.8  8425333      779.
##  2  1957 Asia      Afghanistan    30.3  9240934      821.
##  3  1962 Asia      Afghanistan    32.0 10267083      853.
##  4  1967 Asia      Afghanistan    34.0 11537966      836.
##  5  1972 Asia      Afghanistan    36.1 13079460      740.
##  6  1977 Asia      Afghanistan    38.4 14880372      786.
##  7  1982 Asia      Afghanistan    39.9 12881816      978.
##  8  1987 Asia      Afghanistan    40.8 13867957      852.
##  9  1992 Asia      Afghanistan    41.7 16317921      649.
## 10  1997 Asia      Afghanistan    41.8 22227415      635.
## # … with 1,694 more rows</code></pre>
<p>Here’s the data for Cambodia, but only certain variables…</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb341-1" data-line-number="1">gapminder <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb341-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(country <span class="op">==</span><span class="st"> &quot;Cambodia&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb341-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(year, lifeExp)</a></code></pre></div>
<pre><code>## # A tibble: 12 x 2
##     year lifeExp
##    &lt;int&gt;   &lt;dbl&gt;
##  1  1952    39.4
##  2  1957    41.4
##  3  1962    43.4
##  4  1967    45.4
##  5  1972    40.3
##  6  1977    31.2
##  7  1982    51.0
##  8  1987    53.9
##  9  1992    55.8
## 10  1997    56.5
## 11  2002    56.8
## 12  2007    59.7</code></pre>
<p>… and what a typical base R call would look like:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb343-1" data-line-number="1">gapminder[gapminder<span class="op">$</span>country <span class="op">==</span><span class="st"> &quot;Cambodia&quot;</span>, <span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;lifeExp&quot;</span>)]</a></code></pre></div>
<pre><code>## # A tibble: 12 x 2
##     year lifeExp
##    &lt;int&gt;   &lt;dbl&gt;
##  1  1952    39.4
##  2  1957    41.4
##  3  1962    43.4
##  4  1967    45.4
##  5  1972    40.3
##  6  1977    31.2
##  7  1982    51.0
##  8  1987    53.9
##  9  1992    55.8
## 10  1997    56.5
## 11  2002    56.8
## 12  2007    59.7</code></pre>
</div>
<div id="pure-predictable-pipeable-optional" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Pure, predictable, pipeable (OPTIONAL)</h3>
<p>We’ve barely scratched the surface of <code>dplyr</code> but I want to point out key principles you may start to appreciate. If you’re new to R or “programming with data”, feel free skip this section and <a href="block010_dplyr-end-single-table.html">move on</a>.</p>
<p><code>dplyr</code>’s verbs, such as <code>filter()</code> and <code>select()</code>, are what’s called <a href="http://en.wikipedia.org/wiki/Pure_function">pure functions</a>. To quote from Wickham’s <a href="http://adv-r.had.co.nz/Functions.html">Advanced R Programming book</a>:</p>
<blockquote>
<p>The functions that are the easiest to understand and reason about are pure functions: functions that always map the same input to the same output and have no other impact on the workspace. In other words, pure functions have no side effects: they don’t affect the state of the world in any way apart from the value they return.</p>
</blockquote>
<p>And finally, the data is <strong>always</strong> the very first argument of the verb functions.</p>
</div>
<div id="additional-resources" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Additional resources</h3>
<p><code>dplyr</code> official stuff</p>
<ul>
<li>package home <a href="http://cran.r-project.org/web/packages/dplyr/index.html">on CRAN</a>
<ul>
<li>note there are several vignettes, with the <a href="http://cran.r-project.org/web/packages/dplyr/vignettes/introduction.html">introduction</a> being the most relevant right now</li>
<li>the <a href="http://cran.rstudio.com/web/packages/dplyr/vignettes/window-functions.html">one on window functions</a> will also be interesting to you now</li>
</ul></li>
<li>development home <a href="https://github.com/hadley/dplyr">on GitHub</a></li>
<li><a href="https://www.dropbox.com/sh/i8qnluwmuieicxc/AAAgt9tIKoIm7WZKIyK25lh6a">tutorial HW delivered</a> (note this links to a DropBox folder) at useR! 2014 conference</li>
</ul>
<p><a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">RStudio Data Wrangling cheatsheet</a>, covering <code>dplyr</code> and <code>tidyr</code>. Remember you can get to these via <em>Help &gt; Cheatsheets.</em></p>
<p><a href="https://github.com/tjmahr/MadR_Pipelines">Excellent slides</a> on pipelines and <code>dplyr</code> by TJ Mahr, talk given to the Madison R Users Group.</p>
<p>Blog post <a href="http://www.dataschool.io/dplyr-tutorial-for-faster-data-manipulation-in-r/">Hands-on dplyr tutorial for faster data manipulation in R</a> by Data School, that includes a link to an R Markdown document and links to videos</p>
<p><a href="https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">Cheatsheet</a> from R Studio for <code>dplyr</code>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basics-of-r-and-rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="more-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["gentle-intro-youreka.pdf", "PDF"], ["gentle-intro-youreka", "EPUB"]],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
